<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Aeda</title>
    <link href='https://fonts.googleapis.com/css?family=Indie Flower' rel='stylesheet'>
    <link href="background.css" rel="stylesheet">

</head>

<body>
    <div class="content">
        <div class="container">
            <p class="lang">Fr - Eng - ~es - ~jp</p>
            <div class="pfp">
                <img src="res/pfp.jpg" alt="pfp">
                <h1>Aeda</h1>
            </div>
            <p class="separation">𓆝 𓆟 𓆞 𓆝 𓆟 𓆝 𓆟 𓆞 𓆝</p>
            <p class="music"><i id="title">Stellar stellar</i><br>
                <span id="artist">Hoshimachi Suisei</span><br>
                <span id="time">01:43 </span>
                <span id="left-bar" class="blue">━━━━●</span><span id="right-bar" class="purple">─────</span>
                <span id="len">03:50</span><br>
                ⇆ㅤ ㅤ◁ㅤ ❚❚ ㅤ▷ ㅤㅤ↻<br>
            </p>
            <h2>About me <span>☆</span></h2>
            <p>
                20 - she/her, Comp sci student<br>
                <u>DM open</u> <code>Discord : .aeda.</code><br>
                Kind and shy ♡
            </p>
            <h2>
                Love
            </h2>
            <p>
                I Love too many things to keep it to myself<br>
                - Anime<br>
                - Art (all form, but I'm not really good at it)<br>
                - Video games : Minecraft, Valorant, CS:GO, Overwatch, League of Legends<br>
                - Science<br>
                <b>- Cute things</b>
            </p>
            <div class="gif">
                <img src="https://i.pinimg.com/originals/7a/43/28/7a43287ffe3f815fda626ea4e2e870c4.gif">
            </div>

            <p class="separation">𓆝 𓆟 𓆞 𓆝 𓆟 𓆝 𓆟 𓆞 𓆝</p>
            <div class="buttons">
                <form action="gallery.html">
                    <input type="submit" value="gallery" />
                </form>
                <form action="inspo.html">
                    <input type="submit" value="inspo" />
                </form>
            </div>
        </div>
        <div class="socials">
            <a href="https://myanimelist.net/profile/OniAeda" aria-label="MyAnimeList">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                    <path
                        d="M8.273 7.247v8.423l-2.103-.003v-5.216l-2.03 2.404l-1.989-2.458l-.02 5.285H.001L0 7.247h2.203l1.865 2.545l2.015-2.546l2.19.001zm8.628 2.069l.025 6.335h-2.365l-.008-2.871h-2.8c.07.499.21 1.266.417 1.779c.155.381.298.751.583 1.128l-1.705 1.125c-.349-.636-.622-1.337-.878-2.082a9.296 9.296 0 0 1-.507-2.179c-.085-.75-.097-1.471.107-2.212a3.908 3.908 0 0 1 1.161-1.866c.313-.293.749-.5 1.1-.687c.351-.187.743-.264 1.107-.359a7.405 7.405 0 0 1 1.191-.183c.398-.034 1.107-.066 2.39-.028l.545 1.749H14.51c-.593.008-.878.001-1.341.209a2.236 2.236 0 0 0-1.278 1.92l2.663.033l.038-1.81h2.309zm3.992-2.099v6.627l3.107.032l-.43 1.775h-4.807V7.187l2.13.03z" />
                </svg></a>
            <a
                href="https://open.spotify.com/user/11lij3zuzaaf60iqersgpea1r?si=LRcj0-osQYyVESj2qRshWw&nd=1&dlsi=45c1f9f93eb7424a"><svg
                    xmlns="http://www.w3.org/2000/svg" aria-lable="spotify" viewBox="0 0 24 24">
                    <path
                        d="M19.098 10.638c-3.868-2.297-10.248-2.508-13.941-1.387-.593.18-1.22-.155-1.399-.748-.18-.593.154-1.22.748-1.4 4.239-1.287 11.285-1.038 15.738 1.605.533.317.708 1.005.392 1.538-.316.533-1.005.709-1.538.392zm-.126 3.403c-.272.44-.847.578-1.287.308-3.225-1.982-8.142-2.557-11.958-1.399-.494.15-1.017-.129-1.167-.623-.149-.495.13-1.016.624-1.167 4.358-1.322 9.776-.682 13.48 1.595.44.27.578.847.308 1.286zm-1.469 3.267c-.215.354-.676.465-1.028.249-2.818-1.722-6.365-2.111-10.542-1.157-.402.092-.803-.16-.895-.562-.092-.403.159-.804.562-.896 4.571-1.045 8.492-.595 11.655 1.338.353.215.464.676.248 1.028zm-5.503-17.308c-6.627 0-12 5.373-12 12 0 6.628 5.373 12 12 12 6.628 0 12-5.372 12-12 0-6.627-5.372-12-12-12z" />
                </svg></a>
            <a href="https://twitter.com/OniAeda">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 26 26">
                    <path
                        d="M 25.855469 5.574219 C 24.914063 5.992188 23.902344 6.273438 22.839844 6.402344 C 23.921875 5.75 24.757813 4.722656 25.148438 3.496094 C 24.132813 4.097656 23.007813 4.535156 21.8125 4.769531 C 20.855469 3.75 19.492188 3.113281 17.980469 3.113281 C 15.082031 3.113281 12.730469 5.464844 12.730469 8.363281 C 12.730469 8.773438 12.777344 9.175781 12.867188 9.558594 C 8.503906 9.339844 4.636719 7.246094 2.046875 4.070313 C 1.59375 4.847656 1.335938 5.75 1.335938 6.714844 C 1.335938 8.535156 2.261719 10.140625 3.671875 11.082031 C 2.808594 11.054688 2 10.820313 1.292969 10.425781 C 1.292969 10.449219 1.292969 10.46875 1.292969 10.492188 C 1.292969 13.035156 3.101563 15.15625 5.503906 15.640625 C 5.0625 15.761719 4.601563 15.824219 4.121094 15.824219 C 3.78125 15.824219 3.453125 15.792969 3.132813 15.730469 C 3.800781 17.8125 5.738281 19.335938 8.035156 19.375 C 6.242188 20.785156 3.976563 21.621094 1.515625 21.621094 C 1.089844 21.621094 0.675781 21.597656 0.265625 21.550781 C 2.585938 23.039063 5.347656 23.90625 8.3125 23.90625 C 17.96875 23.90625 23.25 15.90625 23.25 8.972656 C 23.25 8.742188 23.246094 8.515625 23.234375 8.289063 C 24.261719 7.554688 25.152344 6.628906 25.855469 5.574219">
                    </path>
                </svg>
            </a>
            <a href="https://tracker.gg/valorant/profile/riot/Aeda%23pip/overview">
                <svg xmlns="http://www.w3.org/2000/svg" fill="#000000" viewBox="0 0 24 24" role="img">
                    <path
                        d="M12.534 21.77l-1.09-2.81 10.52.54-.451 4.5zM15.06 0L.307 6.969 2.59 17.471H5.6l-.52-7.512.461-.144 1.81 7.656h3.126l-.116-9.15.462-.144 1.582 9.294h3.31l.78-11.053.462-.144.82 11.197h4.376l1.54-15.37Z" />
                </svg>
            </a>
            <a href="https://www.twitch.tv/oniaeda">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">
                    <path
                        d="M2.149 0l-1.612 4.119v16.836h5.731v3.045h3.224l3.045-3.045h4.657l6.269-6.269v-14.686h-21.314zm19.164 13.612l-3.582 3.582h-5.731l-3.045 3.045v-3.045h-4.836v-15.045h17.194v11.463zm-3.582-7.343v6.262h-2.149v-6.262h2.149zm-5.731 0v6.262h-2.149v-6.262h2.149z"
                        fill-rule="evenodd" clip-rule="evenodd" />
                </svg>
            </a>
        </div>
    </div>
    <script>
        async function getMusic() {
            const url = "http://158.178.206.4:8000/current-song?state=9294e22a-7676-4b81-b00c-7c2771dc49a4";
            try {
                const response = await fetch(url);
                if (!response.ok) {
                    throw new Error(`Response status: ${response.status}`);
                }
                return await response.json();
            } catch (error) {
                console.error(error.message);
            }
        }

        Number.prototype.toHHMMSS = function () {
            var sec_num = parseInt(this, 10); // don't forget the second param
            var hours = Math.floor(sec_num / 3600);
            var minutes = Math.floor((sec_num - (hours * 3600)) / 60);
            var seconds = sec_num - (hours * 3600) - (minutes * 60);

            if (hours < 10) { hours = "0" + hours; }
            if (minutes < 10) { minutes = "0" + minutes; }
            if (seconds < 10) { seconds = "0" + seconds; }

            if (hours === "00")
                return minutes + ':' + seconds;
            return hours + ':' + minutes + ':' + seconds;
        }

        function computeRatio(a, b) {
            return Math.floor((a / b) * 10);
        }

        async function setMusic() {
            let json = await getMusic();
            console.log(json);
            document.getElementById('title').textContent = json['name'];
            document.getElementById('artist').textContent = json['artist'];
            document.getElementById('time').textContent = (json['progress_ms'] / 1000).toHHMMSS();
            document.getElementById('len').textContent = (json['duration_ms'] / 1000).toHHMMSS();
            let ratio = (computeRatio(json['progress_ms'], json['duration_ms']));
            let leftBar = "";
            for (let i = 0; i < ratio - 1; i++) {
                leftBar += "━";
            }
            leftBar += "●";
            document.getElementById('left-bar').textContent = leftBar;

            let rightBar = "";
            for (let j = ratio; j < 10; j++) {
                rightBar += "─";
            }
            document.getElementById('right-bar').textContent = rightBar;
            console.log(leftBar, rightBar);
        }

        setMusic();
        var t = setInterval(setMusic, 5000);
    </script>
</body>


</html>